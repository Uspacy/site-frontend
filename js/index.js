const MAX_INDEX=5,emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;function main(){const e=document.querySelectorAll(".jsOpenModal"),s=document.querySelector(".jsModalClose"),t=document.querySelector(".jsModalBack"),a=document.querySelector(".jsCloseWord"),i=document.querySelector(".jsModal"),c=i?.querySelector(".jsOverlay"),l=document.querySelector(".jsModalFirstKnow"),n=document.querySelector(".jsModalSuccess");function r(e){e.preventDefault(),p?.value&&(p.value=" "+p.value,p.value=p.value.trim()),l&&n&&(l.classList.remove("unvisible"),n.classList.add("unvisible")),i?.classList.add("active"),c?.classList.add("active"),a?.classList?.add("unvisible"),t.classList.remove("unvisible")}function o(e){e.preventDefault(),i?.classList.remove("active"),c?.classList.remove("active")}e?.forEach((function(e){e?.addEventListener("click",r)})),s?.addEventListener("click",o),c?.addEventListener("click",o),t?.addEventListener("click",o),a?.addEventListener("click",o),document.body.addEventListener("keyup",(function(e){"Escape"==e.code&&(document.querySelector(".modal.active")?.classList.remove("active"),document.querySelector(".overlay.active")?.classList.remove("active"))}),!1);const d=document.querySelectorAll(".jsMenuLink"),u=document.querySelectorAll(".jsMenuContentItem"),v=document.querySelector(".jsLeftArrow"),m=document.querySelector(".jsRightArrow"),L=document.querySelector(".jsDigit");function b(e){e.preventDefault();[...d].find((e=>e.classList.contains("active")))?.classList.remove("active");const s=this.dataset.menu;u?.forEach(((e,t)=>{e.dataset?.menu===s?(e?.classList.add("active"),L.innerHTML=t+1,t>0&&v.classList.remove("jsDisable"),0===t&&v.classList.add("jsDisable"),t<5&&m.classList.remove("jsDisable"),5===t&&m.classList.add("jsDisable")):e?.classList.contains("active")&&e.classList.remove("active"),this.classList.add("active")}))}d?.forEach((e=>{e.addEventListener("click",b)})),v?.addEventListener("click",(function(e){e.preventDefault(),e.currentTarget.classList.contains("jsDisable")||u?.forEach(((e,s)=>{e?.classList.contains("active")&&s>0&&(L.innerHTML=s,e.classList.remove("active"),u?.[s-1].classList.add("active"),d?.[s].classList.remove("active"),d?.[s-1].classList.add("active"),1===s&&v.classList.add("jsDisable"),5===s&&m.classList.remove("jsDisable"))}))})),m?.addEventListener("click",(function(e){if(e.preventDefault(),e.currentTarget.classList.contains("jsDisable"))return;let s=null;u?.forEach(((e,t)=>{e?.classList.contains("active")&&t<5&&(s=t+1,e.classList.remove("active"),d?.[t].classList.remove("active"),4===t&&m.classList.add("jsDisable"),0===t&&v.classList.remove("jsDisable"))})),s&&(u?.[s].classList.add("active"),d?.[s].classList.add("active"),L.innerHTML=s+1)}));const E=document.querySelector(".menuContent");let S=null,f=null;E?.addEventListener("touchstart",(function(e){const s=e.touches[0];S=s.clientX,f=s.clientY})),E?.addEventListener("touchend",(function(e){const s=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,a=s-S,i=t-f;Math.abs(a)>Math.abs(i)&&(S<s&&(v.classList.contains("jsDisable")||u?.forEach(((e,s)=>{e?.classList.contains("active")&&s>0&&(L.innerHTML=s,e.classList.remove("active"),u?.[s-1].classList.add("active"),d?.[s].classList.remove("active"),d?.[s-1].classList.add("active"),1===s&&v.classList.add("jsDisable"),5===s&&m.classList.remove("jsDisable"))}))),S>s&&function(){if(m.classList.contains("jsDisable"))return;let e=null;u?.forEach(((s,t)=>{s?.classList.contains("active")&&t<5&&(e=t+1,s.classList.remove("active"),d?.[t].classList.remove("active"),4===t&&m.classList.add("jsDisable"),0===t&&v.classList.remove("jsDisable"))})),e&&(u?.[e].classList.add("active"),d?.[e].classList.add("active"),L.innerHTML=e+1)}()),S=null}));const h=document.querySelector("#consent"),y=document.querySelector("#modal-consent"),j=document.querySelector(".jsForm"),q=document.querySelector(".jsModalForm"),D=document.querySelector(".jsSuccessWindow"),g=j?.querySelector(".email"),p=q?.querySelector(".email");h?.addEventListener("change",(function(e){const s=this.parentElement.parentElement.querySelector(".btnSubmit");emailPattern.test(g?.value)?g?.classList?.remove("emailError"):g?.classList?.add("emailError"),s&&(s.disabled=!this.checked||!emailPattern.test(g?.value))})),y?.addEventListener("change",(function(e){const s=this.parentElement.parentElement.querySelector(".btnSubmit");emailPattern.test(p?.value)?p?.classList?.remove("emailError"):p?.classList?.add("emailError"),s&&(s.disabled=!this.checked||!emailPattern.test(p?.value))}));const M=(e,s=500)=>{let t;return(...a)=>{t&&clearTimeout(t),t=setTimeout((()=>{e.apply(null,a)}),s)}};function k(){D?.classList.toggle("unvisible"),j?.classList.toggle("unvisible")}async function P(e){try{e.preventDefault();const s=this.querySelector(".email");if(s?.value.length<2||!emailPattern.test(s?.value))return void s.classList.add("emailError");const i="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfUl5ODYQ5INiI-GysrsoR0tB9t5etaOSCb9VN7xzwxNEno7Q/formResponse?&submit=Submit",c=new FormData;c.append("entry.1493797334",s?.value);await fetch(i,{method:"POST",body:c,mode:"no-cors"})&&(this.classList.contains("jsModalForm")&&l&&n&&(l.classList.toggle("unvisible"),n.classList.toggle("unvisible"),a?.classList?.remove("unvisible"),t.classList.add("unvisible")),this.classList.contains("jsForm")&&(k(),setTimeout(k,3e3))),this.reset()}catch(e){console.log("Виникла помилка при відправці email!"),console.log(e)}}g?.addEventListener("focusout",(()=>{emailPattern.test(g?.value)?g?.classList.add("blurSucces"):g.classList.add("emailError")})),g?.addEventListener("focus",(()=>g?.classList.remove("blurSucces"))),g?.addEventListener("input",M((()=>{const e=j.querySelector(".btnSubmit");emailPattern.test(g?.value)?g.classList.remove("emailError"):g.classList.add("emailError"),h.checked?h.classList.remove("error"):h.classList.add("error"),e&&emailPattern.test(g?.value)&&h.checked?e.disabled=!1:e.disabled=!0}))),p?.addEventListener("focusout",(()=>{emailPattern.test(p?.value)?p?.classList.add("blurSucces"):p.classList.add("emailError")})),p?.addEventListener("focus",(()=>p?.classList.remove("blurSucces"))),p?.addEventListener("input",M((()=>{const e=q.querySelector(".btnSubmit");emailPattern.test(p?.value)?p.classList.remove("emailError"):p.classList.add("emailError"),y.checked?y.classList.remove("error"):y.classList.add("error"),e&&emailPattern.test(p?.value)&&y.checked?e.disabled=!1:e.disabled=!0}))),document.querySelectorAll(".email").forEach((e=>e.addEventListener("change",(s=>{e.classList.remove("emailError")})))),j?.addEventListener("submit",P),q?.addEventListener("submit",P)}document.addEventListener("DOMContentLoaded",main);