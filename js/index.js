const MAX_INDEX=5,emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;function main(){const e=document.querySelectorAll(".jsOpenModal"),s=document.querySelector(".jsModalClose"),t=document.querySelector(".jsModalBack"),a=document.querySelector(".jsCloseWord"),i=document.querySelector(".jsModal"),c=i?.querySelector(".jsOverlay"),l=document.querySelector(".jsModalFirstKnow"),n=document.querySelector(".jsModalSuccess");function r(){l&&n&&(l.classList.toggle("unvisible"),n.classList.toggle("unvisible"),a?.classList?.remove("unvisible"),t.classList.add("unvisible"))}function o(e){e.preventDefault(),M?.value&&(M.value=" "+M.value,M.value=M.value.trim()),l&&n&&(l.classList.remove("unvisible"),n.classList.add("unvisible")),i?.classList.add("active"),c?.classList.add("active"),a?.classList?.add("unvisible"),t.classList.remove("unvisible")}function d(e){e.preventDefault(),i?.classList.remove("active"),c?.classList.remove("active"),r()}e?.forEach((function(e){e?.addEventListener("click",o)})),s?.addEventListener("click",d),c?.addEventListener("click",d),t?.addEventListener("click",d),a?.addEventListener("click",d),document.body.addEventListener("keyup",(function(e){"Escape"==e.code&&(document.querySelector(".modal.active")?.classList.remove("active"),document.querySelector(".overlay.active")?.classList.remove("active"))}),!1);const u=document.querySelectorAll(".jsMenuLink"),v=document.querySelectorAll(".jsMenuContentItem"),m=document.querySelector(".jsLeftArrow"),L=document.querySelector(".jsRightArrow"),b=document.querySelector(".jsDigit");function E(e){e.preventDefault();[...u].find((e=>e.classList.contains("active")))?.classList.remove("active");const s=this.dataset.menu;v?.forEach(((e,t)=>{e.dataset?.menu===s?(e?.classList.add("active"),b.innerHTML=t+1,t>0&&m.classList.remove("jsDisable"),0===t&&m.classList.add("jsDisable"),t<5&&L.classList.remove("jsDisable"),5===t&&L.classList.add("jsDisable")):e?.classList.contains("active")&&e.classList.remove("active"),this.classList.add("active")}))}u?.forEach((e=>{e.addEventListener("click",E)})),m?.addEventListener("click",(function(e){e.preventDefault(),e.currentTarget.classList.contains("jsDisable")||v?.forEach(((e,s)=>{e?.classList.contains("active")&&s>0&&(b.innerHTML=s,e.classList.remove("active"),v?.[s-1].classList.add("active"),u?.[s].classList.remove("active"),u?.[s-1].classList.add("active"),1===s&&m.classList.add("jsDisable"),5===s&&L.classList.remove("jsDisable"))}))})),L?.addEventListener("click",(function(e){if(e.preventDefault(),e.currentTarget.classList.contains("jsDisable"))return;let s=null;v?.forEach(((e,t)=>{e?.classList.contains("active")&&t<5&&(s=t+1,e.classList.remove("active"),u?.[t].classList.remove("active"),4===t&&L.classList.add("jsDisable"),0===t&&m.classList.remove("jsDisable"))})),s&&(v?.[s].classList.add("active"),u?.[s].classList.add("active"),b.innerHTML=s+1)}));const f=document.querySelector(".menuContent");let S=null,h=null;f?.addEventListener("touchstart",(function(e){const s=e.touches[0];S=s.clientX,h=s.clientY})),f?.addEventListener("touchend",(function(e){const s=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,a=s-S,i=t-h;Math.abs(a)>Math.abs(i)&&(S<s&&(m.classList.contains("jsDisable")||v?.forEach(((e,s)=>{e?.classList.contains("active")&&s>0&&(b.innerHTML=s,e.classList.remove("active"),v?.[s-1].classList.add("active"),u?.[s].classList.remove("active"),u?.[s-1].classList.add("active"),1===s&&m.classList.add("jsDisable"),5===s&&L.classList.remove("jsDisable"))}))),S>s&&function(){if(L.classList.contains("jsDisable"))return;let e=null;v?.forEach(((s,t)=>{s?.classList.contains("active")&&t<5&&(e=t+1,s.classList.remove("active"),u?.[t].classList.remove("active"),4===t&&L.classList.add("jsDisable"),0===t&&m.classList.remove("jsDisable"))})),e&&(v?.[e].classList.add("active"),u?.[e].classList.add("active"),b.innerHTML=e+1)}()),S=null}));const y=document.querySelector("#consent"),j=document.querySelector("#modal-consent"),q=document.querySelector(".jsForm"),D=document.querySelector(".jsModalForm"),g=document.querySelector(".jsSuccessWindow"),p=q?.querySelector(".email"),M=D?.querySelector(".email");y?.addEventListener("change",(function(e){const s=this.parentElement.parentElement.querySelector(".btnSubmit");emailPattern.test(p?.value)?p?.classList?.remove("emailError"):p?.classList?.add("emailError"),s&&(s.disabled=!this.checked||!emailPattern.test(p?.value))})),j?.addEventListener("change",(function(e){const s=this.parentElement.parentElement.querySelector(".btnSubmit");emailPattern.test(M?.value)?M?.classList?.remove("emailError"):M?.classList?.add("emailError"),s&&(s.disabled=!this.checked||!emailPattern.test(M?.value))}));const k=(e,s=500)=>{let t;return(...a)=>{t&&clearTimeout(t),t=setTimeout((()=>{e.apply(null,a)}),s)}};function P(){g?.classList.toggle("unvisible"),q?.classList.toggle("unvisible")}async function T(e){try{e.preventDefault();const s=this.querySelector(".email");if(s?.value.length<2||!emailPattern.test(s?.value))return void s.classList.add("emailError");const t="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfUl5ODYQ5INiI-GysrsoR0tB9t5etaOSCb9VN7xzwxNEno7Q/formResponse?&submit=Submit",a=new FormData;a.append("entry.1493797334",s?.value);await fetch(t,{method:"POST",body:a,mode:"no-cors"})&&(this.classList.contains("jsModalForm")&&r(),this.classList.contains("jsForm")&&(P(),setTimeout(P,3e3))),this.reset()}catch(e){console.log("Виникла помилка при відправці email!"),console.log(e)}}p?.addEventListener("focusout",(()=>{emailPattern.test(p?.value)?p?.classList.add("blurSucces"):p.classList.add("emailError")})),p?.addEventListener("focus",(()=>p?.classList.remove("blurSucces"))),p?.addEventListener("input",k((()=>{const e=q.querySelector(".btnSubmit");emailPattern.test(p?.value)?p.classList.remove("emailError"):p.classList.add("emailError"),y.checked?y.classList.remove("error"):y.classList.add("error"),e&&emailPattern.test(p?.value)&&y.checked?e.disabled=!1:e.disabled=!0}))),M?.addEventListener("focusout",(()=>{emailPattern.test(M?.value)?M?.classList.add("blurSucces"):M.classList.add("emailError")})),M?.addEventListener("focus",(()=>M?.classList.remove("blurSucces"))),M?.addEventListener("input",k((()=>{const e=D.querySelector(".btnSubmit");emailPattern.test(M?.value)?M.classList.remove("emailError"):M.classList.add("emailError"),j.checked?j.classList.remove("error"):j.classList.add("error"),e&&emailPattern.test(M?.value)&&j.checked?e.disabled=!1:e.disabled=!0}))),document.querySelectorAll(".email").forEach((e=>e.addEventListener("change",(s=>{e.classList.remove("emailError")})))),q?.addEventListener("submit",T),D?.addEventListener("submit",T)}document.addEventListener("DOMContentLoaded",main);